# Nginx配置：隐藏管理面板
server {
    listen 443 ssl;
    server_name api.yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    # 默认返回空白页面或404
    location / {
        return 200 '';
        add_header Content-Type text/html;
    }

    # 特殊管理路径（只有您知道）
    location /admin-secret-xyz123/ {
        # 重写路径，转发到真实后端
        rewrite ^/admin-secret-xyz123/(.*) /$1 break;

        proxy_pass https://new-api-production-bf11.up.railway.app;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # 隐藏服务器信息
        proxy_hide_header Server;
        proxy_hide_header X-Powered-By;
    }

    # API端点仍然可用（用于实际API调用）
    location /v1/ {
        proxy_pass https://new-api-production-bf11.up.railway.app/v1/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Authorization $http_authorization;
    }
}

# 使用方法：
# 普通访问: https://api.yourdomain.com → 空白页
# 管理访问: https://api.yourdomain.com/admin-secret-xyz123/ → 管理面板
# API调用: https://api.yourdomain.com/v1/chat/completions → 正常工作