[SYS] 2025/10/10 - 10:30:17 | initializing token encoders 
[SYS] 2025/10/10 - 10:30:17 | token encoders initialized 
[SYS] 2025/10/10 - 10:30:17 | SQL_DSN not set, using SQLite as database 
[SYS] 2025/10/10 - 10:30:17 | database migration started 

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.289ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="channels"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.565ms] [34;1m[rows:0][0m CREATE TABLE `channels` (`id` integer,`type` integer DEFAULT 0,`key` text NOT NULL,`open_ai_organization` text,`test_model` text,`status` integer DEFAULT 1,`name` text,`weight` integer DEFAULT 0,`created_time` integer,`test_time` integer,`response_time` integer,`base_url` text DEFAULT "",`other` text,`balance` real,`balance_updated_time` integer,`models` text,`group` varchar(64) DEFAULT "default",`used_quota` integer DEFAULT 0,`model_mapping` text,`status_code_mapping` varchar(1024) DEFAULT "",`priority` integer DEFAULT 0,`auto_ban` integer DEFAULT 1,`other_info` text,`tag` text,`setting` text,`param_override` text,`header_override` text,`remark` varchar(255),`channel_info` json,`settings` text,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.379ms] [34;1m[rows:0][0m CREATE INDEX `idx_channels_tag` ON `channels`(`tag`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.309ms] [34;1m[rows:0][0m CREATE INDEX `idx_channels_name` ON `channels`(`name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.012ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="tokens"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.320ms] [34;1m[rows:0][0m CREATE TABLE `tokens` (`id` integer,`user_id` integer,`key` char(48),`status` integer DEFAULT 1,`name` text,`created_time` integer,`accessed_time` integer,`expired_time` integer DEFAULT -1,`remain_quota` integer DEFAULT 0,`unlimited_quota` numeric,`model_limits_enabled` numeric,`model_limits` varchar(1024) DEFAULT "",`allow_ips` text DEFAULT "",`used_quota` integer DEFAULT 0,`group` text DEFAULT "",`deleted_at` datetime,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.266ms] [34;1m[rows:0][0m CREATE INDEX `idx_tokens_deleted_at` ON `tokens`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.410ms] [34;1m[rows:0][0m CREATE INDEX `idx_tokens_name` ON `tokens`(`name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.287ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `idx_tokens_key` ON `tokens`(`key`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.257ms] [34;1m[rows:0][0m CREATE INDEX `idx_tokens_user_id` ON `tokens`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.009ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="users"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.290ms] [34;1m[rows:0][0m CREATE TABLE `users` (`id` integer,`username` text UNIQUE,`password` text NOT NULL,`display_name` text,`role` integer DEFAULT 1,`status` integer DEFAULT 1,`email` text,`github_id` text,`oidc_id` text,`wechat_id` text,`telegram_id` text,`access_token` char(32),`quota` integer DEFAULT 0,`used_quota` integer DEFAULT 0,`request_count` integer DEFAULT 0,`group` varchar(64) DEFAULT "default",`aff_code` varchar(32),`aff_count` integer DEFAULT 0,`aff_quota` integer DEFAULT 0,`aff_history` integer DEFAULT 0,`inviter_id` integer,`deleted_at` datetime,`linux_do_id` text,`setting` text,`remark` varchar(255),`stripe_customer` varchar(64),PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.246ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_email` ON `users`(`email`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.226ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_deleted_at` ON `users`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.257ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_inviter_id` ON `users`(`inviter_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.240ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `idx_users_aff_code` ON `users`(`aff_code`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.238ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `idx_users_access_token` ON `users`(`access_token`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.224ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_oidc_id` ON `users`(`oidc_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.282ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_git_hub_id` ON `users`(`github_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.210ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_display_name` ON `users`(`display_name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.276ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_username` ON `users`(`username`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.234ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_stripe_customer` ON `users`(`stripe_customer`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.225ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_linux_do_id` ON `users`(`linux_do_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.241ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_telegram_id` ON `users`(`telegram_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.238ms] [34;1m[rows:0][0m CREATE INDEX `idx_users_we_chat_id` ON `users`(`wechat_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.010ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="options"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.331ms] [34;1m[rows:0][0m CREATE TABLE `options` (`key` text,`value` text,PRIMARY KEY (`key`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="redemptions"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.305ms] [34;1m[rows:0][0m CREATE TABLE `redemptions` (`id` integer,`user_id` integer,`key` char(32),`status` integer DEFAULT 1,`name` text,`quota` integer DEFAULT 100,`created_time` integer,`redeemed_time` integer,`used_user_id` integer,`deleted_at` datetime,`expired_time` integer,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.242ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `idx_redemptions_key` ON `redemptions`(`key`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.272ms] [34;1m[rows:0][0m CREATE INDEX `idx_redemptions_deleted_at` ON `redemptions`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.259ms] [34;1m[rows:0][0m CREATE INDEX `idx_redemptions_name` ON `redemptions`(`name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="abilities"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.318ms] [34;1m[rows:0][0m CREATE TABLE `abilities` (`group` varchar(64),`model` varchar(255),`channel_id` integer,`enabled` numeric,`priority` integer DEFAULT 0,`weight` integer DEFAULT 0,`tag` text,PRIMARY KEY (`group`,`model`,`channel_id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.271ms] [34;1m[rows:0][0m CREATE INDEX `idx_abilities_tag` ON `abilities`(`tag`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.258ms] [34;1m[rows:0][0m CREATE INDEX `idx_abilities_weight` ON `abilities`(`weight`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.249ms] [34;1m[rows:0][0m CREATE INDEX `idx_abilities_priority` ON `abilities`(`priority`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.327ms] [34;1m[rows:0][0m CREATE INDEX `idx_abilities_channel_id` ON `abilities`(`channel_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="logs"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.309ms] [34;1m[rows:0][0m CREATE TABLE `logs` (`id` integer,`user_id` integer,`created_at` integer,`type` integer,`content` text,`username` text DEFAULT "",`token_name` text DEFAULT "",`model_name` text DEFAULT "",`quota` integer DEFAULT 0,`prompt_tokens` integer DEFAULT 0,`completion_tokens` integer DEFAULT 0,`use_time` integer DEFAULT 0,`is_stream` numeric,`channel_id` integer,`channel_name` text,`token_id` integer DEFAULT 0,`group` text,`ip` text DEFAULT "",`other` text,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.337ms] [34;1m[rows:0][0m CREATE INDEX `idx_created_at_id` ON `logs`(`id`,`created_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.252ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_channel_id` ON `logs`(`channel_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.276ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_model_name` ON `logs`(`model_name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.271ms] [34;1m[rows:0][0m CREATE INDEX `idx_created_at_type` ON `logs`(`created_at`,`type`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.321ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_user_id` ON `logs`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.318ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_ip` ON `logs`(`ip`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.280ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_group` ON `logs`(`group`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.302ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_token_id` ON `logs`(`token_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.248ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_token_name` ON `logs`(`token_name`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.380ms] [34;1m[rows:0][0m CREATE INDEX `index_username_model_name` ON `logs`(`model_name`,`username`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.274ms] [34;1m[rows:0][0m CREATE INDEX `idx_logs_username` ON `logs`(`username`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.010ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="midjourneys"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.289ms] [34;1m[rows:0][0m CREATE TABLE `midjourneys` (`id` integer,`code` integer,`user_id` integer,`action` varchar(40),`mj_id` text,`prompt` text,`prompt_en` text,`description` text,`state` text,`submit_time` integer,`start_time` integer,`finish_time` integer,`image_url` text,`video_url` text,`video_urls` text,`status` varchar(20),`progress` varchar(30),`fail_reason` text,`channel_id` integer,`quota` integer,`buttons` text,`properties` text,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.281ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_action` ON `midjourneys`(`action`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.265ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_user_id` ON `midjourneys`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.262ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_progress` ON `midjourneys`(`progress`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.287ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_status` ON `midjourneys`(`status`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.271ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_finish_time` ON `midjourneys`(`finish_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.313ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_start_time` ON `midjourneys`(`start_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.240ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_submit_time` ON `midjourneys`(`submit_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.250ms] [34;1m[rows:0][0m CREATE INDEX `idx_midjourneys_mj_id` ON `midjourneys`(`mj_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="top_ups"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.298ms] [34;1m[rows:0][0m CREATE TABLE `top_ups` (`id` integer,`user_id` integer,`amount` integer,`money` real,`trade_no` varchar(255) UNIQUE,`create_time` integer,`complete_time` integer,`status` text,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.274ms] [34;1m[rows:0][0m CREATE INDEX `idx_top_ups_trade_no` ON `top_ups`(`trade_no`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.248ms] [34;1m[rows:0][0m CREATE INDEX `idx_top_ups_user_id` ON `top_ups`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="quota_data"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.441ms] [34;1m[rows:0][0m CREATE TABLE `quota_data` (`id` integer,`user_id` integer,`username` text DEFAULT "",`model_name` text DEFAULT "",`created_at` integer,`token_used` integer DEFAULT 0,`count` integer DEFAULT 0,`quota` integer DEFAULT 0,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.284ms] [34;1m[rows:0][0m CREATE INDEX `idx_quota_data_user_id` ON `quota_data`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.280ms] [34;1m[rows:0][0m CREATE INDEX `idx_qdt_created_at` ON `quota_data`(`created_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.270ms] [34;1m[rows:0][0m CREATE INDEX `idx_qdt_model_user_name` ON `quota_data`(`model_name`,`username`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="tasks"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.291ms] [34;1m[rows:0][0m CREATE TABLE `tasks` (`id` integer,`created_at` integer,`updated_at` integer,`task_id` varchar(50),`platform` varchar(30),`user_id` integer,`channel_id` integer,`quota` integer,`action` varchar(40),`status` varchar(20),`fail_reason` text,`submit_time` integer,`start_time` integer,`finish_time` integer,`progress` varchar(20),`properties` json,`data` json,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.248ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_start_time` ON `tasks`(`start_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.267ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_action` ON `tasks`(`action`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.318ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_channel_id` ON `tasks`(`channel_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.234ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_progress` ON `tasks`(`progress`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.228ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_finish_time` ON `tasks`(`finish_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.252ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_submit_time` ON `tasks`(`submit_time`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.263ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_status` ON `tasks`(`status`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.454ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_user_id` ON `tasks`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.267ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_platform` ON `tasks`(`platform`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.265ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_task_id` ON `tasks`(`task_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.254ms] [34;1m[rows:0][0m CREATE INDEX `idx_tasks_created_at` ON `tasks`(`created_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="models"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.245ms] [34;1m[rows:0][0m CREATE TABLE `models` (`id` integer,`model_name` text NOT NULL,`description` text,`icon` varchar(128),`tags` varchar(255),`vendor_id` integer,`endpoints` text,`status` integer DEFAULT 1,`sync_official` integer DEFAULT 1,`created_time` integer,`updated_time` integer,`deleted_at` datetime,`name_rule` integer DEFAULT 0,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.250ms] [34;1m[rows:0][0m CREATE INDEX `idx_models_deleted_at` ON `models`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.309ms] [34;1m[rows:0][0m CREATE INDEX `idx_models_vendor_id` ON `models`(`vendor_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.261ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `uk_model_name_delete_at` ON `models`(`model_name`,`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="vendors"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.264ms] [34;1m[rows:0][0m CREATE TABLE `vendors` (`id` integer,`name` text NOT NULL,`description` text,`icon` varchar(128),`status` integer DEFAULT 1,`created_time` integer,`updated_time` integer,`deleted_at` datetime,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.246ms] [34;1m[rows:0][0m CREATE INDEX `idx_vendors_deleted_at` ON `vendors`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.314ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `uk_vendor_name_delete_at` ON `vendors`(`name`,`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="prefill_groups"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.268ms] [34;1m[rows:0][0m CREATE TABLE `prefill_groups` (`id` integer,`name` text NOT NULL,`type` text NOT NULL,`items` json,`description` varchar(255),`created_time` integer,`updated_time` integer,`deleted_at` datetime,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.267ms] [34;1m[rows:0][0m CREATE UNIQUE INDEX `uk_prefill_name` ON `prefill_groups`(`name`) WHERE deleted_at IS NULL

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.251ms] [34;1m[rows:0][0m CREATE INDEX `idx_prefill_groups_deleted_at` ON `prefill_groups`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.252ms] [34;1m[rows:0][0m CREATE INDEX `idx_prefill_groups_type` ON `prefill_groups`(`type`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="setups"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.270ms] [34;1m[rows:0][0m CREATE TABLE `setups` (`id` integer,`version` varchar(50) NOT NULL,`initialized_at` bigint NOT NULL,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="two_fas"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.312ms] [34;1m[rows:0][0m CREATE TABLE `two_fas` (`id` integer,`user_id` integer NOT NULL UNIQUE,`secret` varchar(255) NOT NULL,`is_enabled` numeric,`failed_attempts` integer DEFAULT 0,`locked_until` datetime,`last_used_at` datetime,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.251ms] [34;1m[rows:0][0m CREATE INDEX `idx_two_fas_deleted_at` ON `two_fas`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.407ms] [34;1m[rows:0][0m CREATE INDEX `idx_two_fas_user_id` ON `two_fas`(`user_id`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:33
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="two_fa_backup_codes"

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/main.go:250
[0m[33m[0.287ms] [34;1m[rows:0][0m CREATE TABLE `two_fa_backup_codes` (`id` integer,`user_id` integer NOT NULL,`code_hash` varchar(255) NOT NULL,`is_used` numeric,`used_at` datetime,`created_at` datetime,`deleted_at` datetime,PRIMARY KEY (`id`))

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.392ms] [34;1m[rows:0][0m CREATE INDEX `idx_two_fa_backup_codes_deleted_at` ON `two_fa_backup_codes`(`deleted_at`)

2025/10/10 10:30:17 [32m/Users/g/go/pkg/mod/github.com/glebarez/sqlite@v1.9.0/migrator.go:294
[0m[33m[0.239ms] [34;1m[rows:0][0m CREATE INDEX `idx_two_fa_backup_codes_user_id` ON `two_fa_backup_codes`(`user_id`)

2025/10/10 10:30:17 [31;1m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/setup.go:11 [35;1mrecord not found
[0m[33m[0.024ms] [34;1m[rows:0][0m SELECT * FROM `setups` ORDER BY `setups`.`id` LIMIT 1

2025/10/10 10:30:17 [31;1m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/user.go:912 [35;1mrecord not found
[0m[33m[0.049ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE role = 100 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[SYS] 2025/10/10 - 10:30:17 | system is not initialized and no root user exists 

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/option.go:23
[0m[33m[0.017ms] [34;1m[rows:0][0m SELECT * FROM `options`

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/ability.go:36
[0m[33m[0.032ms] [34;1m[rows:0][0m SELECT abilities.*, channels.type as channel_type FROM `abilities` left join channels on abilities.channel_id = channels.id WHERE abilities.enabled = true

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/pricing.go:100
[0m[33m[0.024ms] [34;1m[rows:0][0m SELECT * FROM `models` WHERE `models`.`deleted_at` IS NULL

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/pricing.go:152
[0m[33m[0.017ms] [34;1m[rows:0][0m SELECT * FROM `vendors` WHERE `vendors`.`deleted_at` IS NULL
[SYS] 2025/10/10 - 10:30:17 | REDIS_CONN_STRING not set, Redis is not enabled 
[SYS] 2025/10/10 - 10:30:17 | New API v0.0.0 started 
[SYS] 2025/10/10 - 10:30:17 | running in debug mode 
[SYS] 2025/10/10 - 10:30:17 | memory cache enabled 
[SYS] 2025/10/10 - 10:30:17 | sync frequency: 60 seconds 

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/channel_cache.go:29
[0m[33m[0.043ms] [34;1m[rows:0][0m SELECT * FROM `channels`

2025/10/10 10:30:17 [32m/Users/g/Desktop/Â∑•‰Ωú/Áªü‰∏ÄAPIÁΩëÂÖ≥/new-api/model/channel_cache.go:34
[0m[33m[0.015ms] [34;1m[rows:0][0m SELECT * FROM `abilities`
[SYS] 2025/10/10 - 10:30:17 | channels synced from database 
[SYS] 2025/10/10 - 10:30:17 | Ê≠£Âú®Êõ¥Êñ∞Êï∞ÊçÆÁúãÊùøÊï∞ÊçÆ... 
[SYS] 2025/10/10 - 10:30:17 | ‰øùÂ≠òÊï∞ÊçÆÁúãÊùøÊï∞ÊçÆÊàêÂäüÔºåÂÖ±‰øùÂ≠ò0Êù°Êï∞ÊçÆ 
[FATAL] 2025/10/10 - 10:30:17 | [failed to start HTTP server: listen tcp :3000: bind: address already in use] 
